<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Spiritual Growth Through Prayer and Fasting</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/all.min.css">
    <style>
        :root {
            --primary-color: #2563eb;
            --secondary-color: #7dd3fc;
            --gradient-bg: linear-gradient(135deg, #2563eb, #7dd3fc);
            scroll-behavior: smooth;
        }
        body {
            font-family: 'Inter', sans-serif;
            transition: background-color 0.3s, color 0.3s;
        }
        .message-container {
            position: fixed;
            bottom: 20px;
            left: 50%;
            transform: translateX(-50%);
            z-index: 1000;
            transition: all 0.5s ease-in-out;
            opacity: 0;
            pointer-events: none;
            max-width: 90%;
            text-align: center;
        }
        .message-container.active {
            opacity: 1;
            bottom: 40px;
            pointer-events: auto;
        }
        .popup-message {
            position: fixed;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            z-index: 1001;
            background: rgba(255, 255, 255, 0.95);
            border-radius: 12px;
            padding: 1.5rem;
            box-shadow: 0 8px 24px rgba(0, 0, 0, 0.2);
            max-width: 400px;
            width: 90%;
            text-align: center;
            opacity: 0;
            pointer-events: none;
            transition: opacity 0.3s ease-in-out;
        }
        .popup-message.active {
            opacity: 1;
            pointer-events: auto;
        }
        .dark-mode .popup-message {
            background: rgba(45, 55, 72, 0.95);
            color: #e2e8f0;
        }
        .popup-message button {
            margin-top: 1rem;
            padding: 0.5rem 1rem;
            background: var(--primary-color);
            color: white;
            border-radius: 8px;
            transition: background 0.2s;
        }
        .popup-message button:hover {
            background: var(--secondary-color);
        }
        .dark-mode {
            background-color: #1a202c;
            color: #e2e8f0;
        }
        .dark-mode .bg-white {
            background-color: #2d3748;
        }
        .dark-mode .text-gray-700 {
            color: #e2e8f0;
        }
        .dark-mode .bg-blue-600 {
            background-color: #2b6cb0;
        }
        .dark-mode .text-blue-800 {
            color: #63b3ed;
        }
        .dark-mode .border-gray-300 {
            border-color: #4a5568;
        }
        .dark-mode .bg-gray-100 {
            background-color: #1a202c;
        }
        .dark-mode .text-gray-500 {
            color: #a0aec0;
        }
        .dark-mode .bg-gray-500 {
            background-color: #4a5568;
        }
        .dark-mode .hover\:bg-gray-500:hover {
            background-color: #718096;
        }
        .dark-mode .bg-blue-700 {
            background-color: #1e40af;
        }
        .dark-mode .hover\:bg-blue-700:hover {
            background-color: #2563eb;
        }
        .glass-effect {
            background: rgba(255, 255, 255, 0.1);
            backdrop-filter: blur(10px);
            border: 1px solid rgba(255, 255, 255, 0.2);
            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
        }
        .dark-mode .glass-effect {
            background: rgba(45, 55, 72, 0.3);
            border: 1px solid rgba(160, 174, 192, 0.2);
        }
        .section-gradient {
            background: var(--gradient-bg);
            transition: background 0.5s;
        }
        .btn-hover {
            transition: transform 0.2s, box-shadow 0.2s;
        }
        .btn-hover:hover {
            transform: translateY(-2px);
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.2);
        }
        .card-hover {
            transition: transform 0.3s, box-shadow 0.3s;
        }
        .card-hover:hover {
            transform: translateY(-4px);
            box-shadow: 0 6px 20px rgba(0, 0, 0, 0.15);
        }
        .scroll-to-top {
            position: fixed;
            bottom: 20px;
            right: 20px;
            opacity: 0;
            transition: opacity 0.3s, transform 0.3s;
            z-index: 1000;
        }
        .scroll-to-top.visible {
            opacity: 1;
            transform: translateY(0);
        }
        .theme-btn {
            width: 24px;
            height: 24px;
            border-radius: 50%;
            margin-left: 8px;
            cursor: pointer;
            transition: transform 0.2s;
        }
        .theme-btn:hover {
            transform: scale(1.2);
        }
        .progress-bar {
            height: 6px;
            background: #e5e7eb;
            border-radius: 3px;
            overflow: hidden;
        }
        .progress-bar-fill {
            height: 100%;
            background: var(--primary-color);
            transition: width 0.5s ease-in-out;
        }
        .verse-carousel {
            position: relative;
            width: 100%;
            height: 100px;
            overflow: hidden;
            z-index: 10; /* Ensure carousel is on its own layer */
            display: flex;
            align-items: center;
            background: rgba(255, 255, 255, 0.05);
            border-radius: 8px;
        }
        .dark-mode .verse-carousel {
            background: rgba(45, 55, 72, 0.2);
        }
        .verse-container {
            display: flex;
            animation: slide 60s infinite steps(5, end); /* 12 seconds per verse */
            white-space: nowrap;
        }
        .verse-item {
            flex: 0 0 auto;
            width: 600px; /* Fixed width to ensure full visibility */
            padding: 1rem;
            font-size: 1.25rem;
            color: #1e40af;
            font-style: italic;
            text-align: left;
            white-space: normal; /* Allow text wrapping within item */
        }
        .dark-mode .verse-item {
            color: #63b3ed;
        }
        @keyframes slide {
            0% { transform: translateX(0); }
            20% { transform: translateX(0); } /* Pause at first verse */
            25% { transform: translateX(-600px); } /* Move to second */
            45% { transform: translateX(-600px); } /* Pause at second */
            50% { transform: translateX(-1200px); } /* Move to third */
            70% { transform: translateX(-1200px); } /* Pause at third */
            75% { transform: translateX(-1800px); } /* Move to fourth */
            95% { transform: translateX(-1800px); } /* Pause at fourth */
            100% { transform: translateX(-2400px); } /* Move to fifth */
        }
        .verse-container:hover {
            animation-play-state: paused;
        }
    </style>
</head>
<body class="bg-gray-100 text-gray-800">
    <script type="module">
        // Simple UUID generator for local user ID
        function generateUUID() {
            return 'xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx'.replace(/[xy]/g, function(c) {
                const r = Math.random() * 16 | 0, v = c === 'x' ? r : (r & 0x3 | 0x8);
                return v.toString(16);
            });
        }

        // Load or generate user ID
        let userId = localStorage.getItem('prayerAppUserId');
        if (!userId) {
            userId = generateUUID();
            localStorage.setItem('prayerAppUserId', userId);
        }

        // Function to show temporary messages
        function showMessage(text, isError = false) {
            const messageEl = document.getElementById('message-box');
            if (!messageEl) return;
            messageEl.innerHTML = `<i class="fas ${isError ? 'fa-exclamation-circle' : 'fa-check-circle'} mr-2"></i>${text}`;
            messageEl.className = `message-container active px-6 py-3 rounded-full shadow-lg ${isError ? 'bg-red-500 text-white' : 'bg-blue-500 text-white'}`;
            setTimeout(() => {
                messageEl.classList.remove('active');
            }, 3000);
        }

        // Function to show persistent popup
        function showPopupMessage(text) {
            const popupEl = document.getElementById('popup-message');
            if (!popupEl) return;
            popupEl.innerHTML = `
                <div class="flex items-center justify-center">
                    <i class="fas fa-clock mr-2 text-lg"></i>
                    <span>${text}</span>
                </div>
                <button id="close-popup" class="btn-hover" aria-label="Close popup">Close</button>
            `;
            popupEl.classList.add('active');
            const closeBtn = document.getElementById('close-popup');
            if (closeBtn) {
                closeBtn.addEventListener('click', () => {
                    popupEl.classList.remove('active');
                });
            }
        }

        // Theme Management
        function setTheme(primaryColor, secondaryColor) {
            document.documentElement.style.setProperty('--primary-color', primaryColor);
            document.documentElement.style.setProperty('--secondary-color', secondaryColor);
            document.documentElement.style.setProperty('--gradient-bg', `linear-gradient(135deg, ${primaryColor}, ${secondaryColor})`);
            localStorage.setItem('theme', JSON.stringify({ primary: primaryColor, secondary: secondaryColor }));
        }

        // Dark Mode Toggle
        function toggleDarkMode() {
            document.body.classList.toggle('dark-mode');
            const isDarkMode = document.body.classList.contains('dark-mode');
            localStorage.setItem('darkMode', isDarkMode);
            const toggleBtn = document.getElementById('dark-mode-toggle');
            if (toggleBtn) {
                toggleBtn.innerHTML = isDarkMode ? '<i class="fas fa-sun"></i> Light Mode' : '<i class="fas fa-moon"></i> Dark Mode';
                toggleBtn.setAttribute('aria-pressed', isDarkMode);
            }
        }

        // Prayer Timer
        let timerInterval = null;
        let timerProgress = 0;
        let totalSeconds = 0;
        function startPrayerTimer() {
            const timerDisplay = document.getElementById('timer-display');
            const startBtn = document.getElementById('start-timer');
            const stopBtn = document.getElementById('stop-timer');
            const progressFill = document.getElementById('progress-fill');
            if (!timerDisplay || !startBtn || !stopBtn || !progressFill) return;

            totalSeconds = 0;
            startBtn.disabled = true;
            startBtn.setAttribute('aria-disabled', 'true');
            stopBtn.disabled = false;
            stopBtn.setAttribute('aria-disabled', 'false');
            startBtn.innerHTML = '<i class="fas fa-spinner fa-spin mr-2"></i> Praying...';
            clearInterval(timerInterval);
            timerInterval = setInterval(() => {
                totalSeconds++;
                timerProgress = Math.min((totalSeconds / 300) * 100, 100); // 5 minutes max
                const minutes = Math.floor(totalSeconds / 60);
                const seconds = totalSeconds % 60;
                timerDisplay.textContent = `${minutes}:${seconds.toString().padStart(2, '0')}`;
                progressFill.style.width = `${timerProgress}%`;
            }, 1000);
        }

        function stopPrayerTimer() {
            const timerDisplay = document.getElementById('timer-display');
            const startBtn = document.getElementById('start-timer');
            const stopBtn = document.getElementById('stop-timer');
            const progressFill = document.getElementById('progress-fill');
            if (!timerDisplay || !startBtn || !stopBtn || !progressFill) return;

            clearInterval(timerInterval);
            timerInterval = null;
            const minutes = Math.floor(totalSeconds / 60);
            const seconds = totalSeconds % 60;
            const timeString = `${minutes}:${seconds.toString().padStart(2, '0')}`;
            showPopupMessage(`Total time prayed: ${timeString}`);
            timerProgress = 0;
            totalSeconds = 0;
            timerDisplay.textContent = '0:00';
            progressFill.style.width = '0%';
            startBtn.disabled = false;
            startBtn.setAttribute('aria-disabled', 'false');
            stopBtn.disabled = true;
            stopBtn.setAttribute('aria-disabled', 'true');
            startBtn.innerHTML = '<i class="fas fa-play mr-2"></i> Start Prayer';
        }

        // Scroll-to-top
        function handleScroll() {
            const scrollBtn = document.getElementById('scroll-to-top');
            if (!scrollBtn) return;
            if (window.scrollY > 300) {
                scrollBtn.classList.add('visible');
            } else {
                scrollBtn.classList.remove('visible');
            }
        }

        // Initialize everything
        document.addEventListener('DOMContentLoaded', () => {
            // Load theme
            const savedTheme = localStorage.getItem('theme');
            if (savedTheme) {
                const { primary, secondary } = JSON.parse(savedTheme);
                setTheme(primary, secondary);
            } else {
                setTheme('#2563eb', '#7dd3fc');
            }

            // Load dark mode
            if (localStorage.getItem('darkMode') === 'true') {
                document.body.classList.add('dark-mode');
                const toggleBtn = document.getElementById('dark-mode-toggle');
                if (toggleBtn) {
                    toggleBtn.innerHTML = '<i class="fas fa-sun"></i> Light Mode';
                    toggleBtn.setAttribute('aria-pressed', 'true');
                }
            }

            // Setup dark mode toggle
            const darkToggle = document.getElementById('dark-mode-toggle');
            if (darkToggle) {
                darkToggle.addEventListener('click', toggleDarkMode);
                darkToggle.setAttribute('aria-pressed', document.body.classList.contains('dark-mode'));
            }

            // Setup theme switchers
            const themeButtons = document.querySelectorAll('.theme-btn');
            themeButtons.forEach(btn => {
                btn.addEventListener('click', () => {
                    const primary = btn.dataset.primary;
                    const secondary = btn.dataset.secondary;
                    setTheme(primary, secondary);
                });
            });

            // Setup prayer timer
            const startTimer = document.getElementById('start-timer');
            const stopTimer = document.getElementById('stop-timer');
            if (startTimer && stopTimer) {
                startTimer.addEventListener('click', startPrayerTimer);
                stopTimer.addEventListener('click', stopPrayerTimer);
                startTimer.setAttribute('aria-disabled', 'false');
                stopTimer.setAttribute('aria-disabled', 'true');
            }

            // Setup scroll-to-top
            const scrollBtn = document.getElementById('scroll-to-top');
            if (scrollBtn) {
                scrollBtn.addEventListener('click', () => window.scrollTo({ top: 0, behavior: 'smooth' }));
                window.addEventListener('scroll', handleScroll);
            }

            // Verse carousel setup
            const verseContainer = document.querySelector('.verse-container');
            if (verseContainer) {
                // Duplicate verses to create seamless loop
                const verses = verseContainer.querySelectorAll('.verse-item');
                verses.forEach(verse => {
                    const clone = verse.cloneNode(true);
                    verseContainer.appendChild(clone);
                });
            }

            // Cleanup
            window.addEventListener('unload', () => {
                if (startTimer) startTimer.removeEventListener('click', startPrayerTimer);
                if (stopTimer) stopTimer.removeEventListener('click', stopPrayerTimer);
                if (darkToggle) darkToggle.removeEventListener('click', toggleDarkMode);
                if (scrollBtn) {
                    scrollBtn.removeEventListener('click', () => window.scrollTo({ top: 0, behavior: 'smooth' }));
                    window.removeEventListener('scroll', handleScroll);
                }
                themeButtons.forEach(btn => {
                    btn.removeEventListener('click', () => {});
                });
            });
        });
    </script>

    <!-- Header Section -->
    <header class="section-gradient text-white py-10 shadow-lg transition-colors">
        <div class="container mx-auto px-6 text-center">
            <h1 class="text-4xl md:text-5xl font-bold mb-3"><i class="fas fa-pray mr-2"></i> Spiritual Growth Through Prayer and Fasting</h1>
            <p class="text-lg md:text-xl font-light">Deepen your faith through prayer and fasting.</p>
            <div class="mt-4 flex justify-center items-center gap-2">
                <button id="dark-mode-toggle" class="bg-white text-blue-600 font-semibold py-2 px-4 rounded-full shadow-lg hover:bg-gray-200 transition-colors btn-hover" aria-label="Toggle dark mode">
                    <i class="fas fa-moon mr-2"></i> Dark Mode
                </button>
                <div class="flex gap-2">
                    <button class="theme-btn" data-primary="#2563eb" data-secondary="#7dd3fc" style="background: #2563eb;" aria-label="Blue theme"></button>
                    <button class="theme-btn" data-primary="#16a34a" data-secondary="#86efac" style="background: #16a34a;" aria-label="Green theme"></button>
                    <button class="theme-btn" data-primary="#d946ef" data-secondary="#f3d7fa" style="background: #d946ef;" aria-label="Purple theme"></button>
                </div>
            </div>
        </div>
    </header>

    <!-- Main Content Section -->
    <main class="container mx-auto px-6 py-12">
        <!-- Introduction Section -->
        <section id="introduction" class="mb-16">
            <h2 class="text-3xl font-bold text-blue-800 text-center mb-6 dark:text-blue-400">The Essence of Prayer and Fasting</h2>
            <div class="bg-white p-8 rounded-xl shadow-lg leading-relaxed text-lg transition-colors glass-effect card-hover">
                <p class="mb-4">
                    Prayer and fasting are sacred practices that deepen our connection to God, fostering spiritual discipline and clarity. Prayer is a conversation with the divine, where we express gratitude, seek guidance, and find peace. Fasting complements prayer by focusing our hearts and minds, allowing us to surrender distractions and draw closer to God’s purpose.
                </p>
                <p>
                    Together, these practices cultivate resilience, humility, and a stronger faith, helping us align our lives with God’s will, whether in times of joy or challenge.
                </p>
            </div>
        </section>

        <!-- Benefits Section -->
        <section id="benefits" class="mb-16">
            <h2 class="text-3xl font-bold text-blue-800 text-center mb-6 dark:text-blue-400">Benefits of Prayer and Fasting</h2>
            <div class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-8">
                <div class="bg-white p-8 rounded-xl shadow-lg transition-colors card-hover">
                    <h3 class="text-2xl font-semibold text-blue-700 mb-3 dark:text-blue-300"><i class="fas fa-heart mr-2"></i> Spiritual Discipline</h3>
                    <p class="text-lg leading-relaxed">
                        Fasting and prayer build discipline, teaching us to prioritize spiritual growth over physical desires and strengthening our commitment to faith.
                    </p>
                </div>
                <div class="bg-white p-8 rounded-xl shadow-lg transition-colors card-hover">
                    <h3 class="text-2xl font-semibold text-blue-700 mb-3 dark:text-blue-300"><i class="fas fa-pray mr-2"></i> Deeper Connection</h3>
                    <p class="text-lg leading-relaxed">
                        Combining prayer with fasting intensifies our focus on God, fostering a profound sense of closeness and alignment with His will.
                    </p>
                </div>
                <div class="bg-white p-8 rounded-xl shadow-lg transition-colors card-hover">
                    <h3 class="text-2xl font-semibold text-blue-700 mb-3 dark:text-blue-300"><i class="fas fa-shield-alt mr-2"></i> Emotional Clarity</h3>
                    <p class="text-lg leading-relaxed">
                        Fasting clears mental clutter, while prayer provides emotional strength, helping us face challenges with renewed hope and perspective.
                    </p>
                </div>
                <div class="bg-white p-8 rounded-xl shadow-lg transition-colors card-hover">
                    <h3 class="text-2xl font-semibold text-blue-700 mb-3 dark:text-blue-300"><i class="fas fa-lightbulb mr-2"></i> Divine Guidance</h3>
                    <p class="text-lg leading-relaxed">
                        Through fasting and prayer, we seek God’s wisdom, gaining clarity to make decisions that reflect His purpose for our lives.
                    </p>
                </div>
            </div>
        </section>

        <!-- Prayer Timer Section -->
        <section id="prayer-timer" class="mb-16">
            <h2 class="text-3xl font-bold text-blue-800 text-center mb-6 dark:text-blue-400">Prayer Timer</h2>
            <div class="bg-white p-8 rounded-xl shadow-lg max-w-md mx-auto text-center transition-colors glass-effect card-hover">
                <div id="timer-display" class="text-4xl font-mono text-blue-600 mb-4 dark:text-blue-400" aria-live="polite">0:00</div>
                <div class="progress-bar mb-4">
                    <div id="progress-fill" class="progress-bar-fill" style="width: 0%"></div>
                </div>
                <button id="start-timer" class="bg-blue-600 text-white font-semibold py-3 px-6 rounded-full shadow-lg hover:bg-blue-700 transition-colors mr-2 btn-hover" aria-label="Start prayer timer">
                    <i class="fas fa-play mr-2"></i> Start Prayer
                </button>
                <button id="stop-timer" class="bg-gray-500 text-white font-semibold py-3 px-6 rounded-full shadow-lg hover:bg-gray-600 transition-colors btn-hover" disabled aria-label="Stop prayer timer" aria-disabled="true">
                    <i class="fas fa-stop mr-2"></i> Stop Prayer
                </button>
            </div>
        </section>

        <!-- Fasting and Prayer Section -->
        <section id="fasting-prayer" class="mb-16">
            <h2 class="text-3xl font-bold text-blue-800 text-center mb-6 dark:text-blue-400">Fasting and Prayer Practices</h2>
            <div class="bg-white p-8 rounded-xl shadow-lg max-w-2xl mx-auto transition-colors glass-effect card-hover">
                <div class="mb-6 text-center text-sm text-gray-500 dark:text-gray-400">
                    Your User ID is: <span id="user-id" class="font-mono text-gray-700 dark:text-gray-300">Loading...</span>
                </div>
                <div class="space-y-4">
                    <div>
                        <h3 class="text-xl font-semibold text-gray-700 mb-2 dark:text-gray-200"><i class="fas fa-pray mr-2"></i> Types of Fasts</h3>
                        <p class="text-lg leading-relaxed">
                            Fasting can take many forms, such as a complete fast (abstaining from all food and drink for a set period), a partial fast (limiting certain foods), or a Daniel fast (eating only fruits, vegetables, and water). Choose a fast that aligns with your health and spiritual goals.
                        </p>
                    </div>
                    <div>
                        <h3 class="text-xl font-semibold text-gray-700 mb-2 dark:text-gray-200"><i class="fas fa-clock mr-2"></i> Fasting Duration</h3>
                        <p class="text-lg leading-relaxed">
                            Fasts can last from a single meal to several days. Common durations include 24-hour fasts, sunrise-to-sunset fasts, or extended fasts for specific spiritual purposes. Always consult a healthcare professional before extended fasting.
                        </p>
                    </div>
                    <div>
                        <h3 class="text-xl font-semibold text-gray-700 mb-2 dark:text-gray-200"><i class="fas fa-book mr-2"></i> Combining with Prayer</h3>
                        <p class="text-lg leading-relaxed">
                            Fasting is most effective when paired with intentional prayer. Set aside specific times to pray, meditate on scripture, and seek God’s guidance. Use the prayer timer above to structure your prayer sessions during your fast.
                        </p>
                    </div>
                    <div>
                        <h3 class="text-xl font-semibold text-gray-700 mb-2 dark:text-gray-200"><i class="fas fa-heart mr-2"></i> Spiritual Benefits</h3>
                        <p class="text-lg leading-relaxed">
                            Fasting and prayer help us humble ourselves before God, increase our spiritual sensitivity, and open our hearts to divine revelation. These practices can lead to breakthroughs in personal growth, relationships, and faith.
                        </p>
                    </div>
                    <div>
                        <h3 class="text-xl font-semibold text-gray-700 mb-2 dark:text-gray-200"><i class="fas fa-bible mr-2"></i> Bible Verses on Fasting and Prayer</h3>
                        <div class="verse-carousel">
                            <div class="verse-container">
                                <div class="verse-item">"But when you fast, put oil on your head and wash your face, so that it will not be obvious to others that you are fasting, but only to your Father, who is unseen." – Matthew 6:17-18</div>
                                <div class="verse-item">"Is not this the kind of fasting I have chosen: to loose the chains of injustice and untie the cords of the yoke?" – Isaiah 58:6</div>
                                <div class="verse-item">"So we fasted and petitioned our God about this, and he answered our prayer." – Ezra 8:23</div>
                                <div class="verse-item">"Devote yourselves to prayer, being watchful and thankful." – Colossians 4:2</div>
                                <div class="verse-item">"And when you pray, do not keep on babbling like pagans, for your Father knows what you need before you ask him." – Matthew 6:7-8</div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </section>
    </main>

    <!-- Scroll to Top Button -->
    <button id="scroll-to-top" class="scroll-to-top bg-blue-600 text-white p-3 rounded-full shadow-lg hover:bg-blue-700 transition-colors btn-hover" aria-label="Scroll to top">
        <i class="fas fa-arrow-up"></i>
    </button>

    <!-- Message Container -->
    <div id="message-box" class="message-container" role="alert"></div>

    <!-- Popup Message Container -->
    <div id="popup-message" class="popup-message" role="alert"></div>
</body>
</html>
